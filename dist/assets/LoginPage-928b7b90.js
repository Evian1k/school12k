import{r as o,u as L,j as e,m as x,L as h,G as F,C as A,f as D,g as M,a as V,B as l,R as u}from"./index-c6a96d92.js";import{H as B}from"./Helmet-8ecd5b71.js";import{I as g}from"./input-ccc428fc.js";import{A as R}from"./arrow-left-355e28a9.js";import{M as p}from"./mail-5fe95ae9.js";import{C as j}from"./check-circle-45e7931d.js";const W=()=>{const[a,n]=o.useState(""),[r,m]=o.useState(""),[s,d]=o.useState("email"),{sendLoginCode:f,verifyLoginCode:y,resendCode:w,loading:i,pendingVerification:c}=L(),N=async t=>{if(t.preventDefault(),!a)return;(await f(a)).success&&d("verification")},b=async t=>{if(t.preventDefault(),!r)return;(await y(r)).success},v=async()=>{await w()},C=()=>{d("email"),n(""),m("")},E=t=>{n(t)},S=[{role:"Admin",email:"admin@school.com"},{role:"Teacher",email:"teacher@school.com"},{role:"Student",email:"student@school.com"},{role:"Parent",email:"parent@school.com"}];return e.jsxs(e.Fragment,{children:[e.jsxs(B,{children:[e.jsx("title",{children:"Login - EduManage School Management System"}),e.jsx("meta",{name:"description",content:"Login to your EduManage account to access your school management dashboard."})]}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[e.jsxs(x.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"text-center lg:text-left space-y-6",children:[e.jsxs(h,{to:"/",className:"inline-flex items-center space-x-3 text-white hover:text-gray-200 transition-colors",children:[e.jsx(R,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center",children:e.jsx(F,{className:"w-8 h-8 text-blue-600"})}),e.jsx("span",{className:"text-3xl font-bold text-white",children:"EduManage"})]}),e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-white",children:s==="email"?"Welcome Back!":"Check Your Email"}),e.jsx("p",{className:"text-xl text-gray-300",children:s==="email"?"Enter your email address and we'll send you a verification code to sign in securely.":"We've sent a 6-digit verification code to your email. Enter it below to continue."})]}),e.jsx(x.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"w-full max-w-md mx-auto",children:e.jsxs(A,{className:"glass-effect border-white/20",children:[e.jsxs(D,{className:"text-center",children:[e.jsx(M,{className:"text-2xl font-bold text-white flex items-center justify-center space-x-2",children:s==="email"?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-6 h-6"}),e.jsx("span",{children:"Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-6 h-6"}),e.jsx("span",{children:"Verify Code"})]})}),e.jsx("p",{className:"text-gray-300",children:s==="email"?"Enter your email to receive a verification code":`Code sent to ${(c==null?void 0:c.email)||a}`})]}),e.jsxs(V,{className:"space-y-6",children:[s==="email"?e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Email Address"}),e.jsx(g,{type:"email",value:a,onChange:t=>n(t.target.value),placeholder:"Enter your email address",required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400",autoComplete:"email","aria-describedby":"email-help"})]}),e.jsx(l,{type:"submit",disabled:i||!a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:i?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-4 h-4 mr-2"}),"Send Verification Code"]})})]}):e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Verification Code"}),e.jsx(g,{type:"text",value:r,onChange:t=>m(t.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400 text-center text-lg tracking-widest",maxLength:6,autoComplete:"one-time-code"}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Check your email for the verification code"})]}),e.jsx(l,{type:"submit",disabled:i||r.length!==6,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:i?e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"w-4 h-4 mr-2"}),"Verify & Sign In"]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx(l,{type:"button",variant:"ghost",onClick:v,disabled:i,className:"text-gray-300 hover:text-white p-0 h-auto",children:"Resend Code"}),e.jsx(l,{type:"button",variant:"ghost",onClick:C,className:"text-gray-300 hover:text-white p-0 h-auto",children:"Change Email"})]})]}),s==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-300 text-center",children:"Quick Demo Access:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:S.map(t=>e.jsx(l,{variant:"outline",size:"sm",onClick:()=>E(t.email),className:"border-white/20 text-white hover:bg-white/10 text-xs",children:t.role},t.role))}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Click any role to fill email, then check browser console for verification code"})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-300",children:["Don't have an account?"," ",e.jsx(h,{to:"/register",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Sign up here"})]})})]}),s==="verification"&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-400",children:"The verification code is displayed in the browser console for demo purposes"})})]})]})})]})})]})};export{W as default};
