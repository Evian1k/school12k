import{r as l,u as V,j as e,m as y,L as N,G as H,C as R,f as q,g as T,a as W,B as r,R as h,E as G,h as $}from"./index-dcf5099b.js";import{H as z}from"./Helmet-adea2bff.js";import{I as u}from"./input-401de53b.js";import{A as O}from"./arrow-left-8e206555.js";import{M as b}from"./mail-86a32c34.js";import{L as v}from"./lock-3941e00f.js";import{C}from"./check-circle-14f7e60c.js";const ee=()=>{const[a,d]=l.useState(""),[n,p]=l.useState(""),[o,g]=l.useState(""),[c,E]=l.useState(!1),[t,m]=l.useState("email"),[Q,j]=l.useState("code"),{sendLoginCode:S,loginWithPassword:k,verifyLoginCode:L,resendCode:F,loading:i,pendingVerification:x}=V(),A=async s=>{if(s.preventDefault(),!a)return;if(a.toLowerCase()==="emmanuelevian@gmail.com"){j("password"),m("password");return}(await S(a)).success&&m("verification")},P=async s=>{if(s.preventDefault(),!a||!n)return;(await k(a,n)).success},M=async s=>{if(s.preventDefault(),!o)return;(await L(o)).success},D=async()=>{await F()},w=()=>{m("email"),d(""),p(""),g(""),j("code")},B=s=>{d(s)},I=[{role:"Admin",email:"emmanuelevian@gmail.com"},{role:"Teacher",email:"teacher@school.com"},{role:"Student",email:"student@school.com"},{role:"Parent",email:"parent@school.com"}];return e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx("title",{children:"Login - EduManage School Management System"}),e.jsx("meta",{name:"description",content:"Login to your EduManage account to access your school management dashboard."})]}),e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-900 via-purple-900 to-indigo-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-6xl grid lg:grid-cols-2 gap-8 items-center",children:[e.jsxs(y.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},className:"text-center lg:text-left space-y-6",children:[e.jsxs(N,{to:"/",className:"inline-flex items-center space-x-3 text-white hover:text-gray-200 transition-colors",children:[e.jsx(O,{className:"w-5 h-5"}),e.jsx("span",{children:"Back to Home"})]}),e.jsxs("div",{className:"flex items-center justify-center lg:justify-start space-x-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white rounded-lg flex items-center justify-center",children:e.jsx(H,{className:"w-8 h-8 text-blue-600"})}),e.jsx("span",{className:"text-3xl font-bold text-white",children:"EduManage"})]}),e.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-white",children:t==="email"?"Welcome Back!":t==="password"?"Enter Password":"Check Your Email"}),e.jsx("p",{className:"text-xl text-gray-300",children:t==="email"?"Enter your email address and we'll send you a verification code to sign in securely.":t==="password"?"Enter your password to complete the login process.":"We've sent a 6-digit verification code to your email. Enter it below to continue."})]}),e.jsx(y.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"w-full max-w-md mx-auto",children:e.jsxs(R,{className:"glass-effect border-white/20",children:[e.jsxs(q,{className:"text-center",children:[e.jsx(T,{className:"text-2xl font-bold text-white flex items-center justify-center space-x-2",children:t==="email"?e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-6 h-6"}),e.jsx("span",{children:"Sign In"})]}):t==="password"?e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-6 h-6"}),e.jsx("span",{children:"Admin Login"})]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-6 h-6"}),e.jsx("span",{children:"Verify Code"})]})}),e.jsx("p",{className:"text-gray-300",children:t==="email"?"Enter your email to receive a verification code":t==="password"?`Enter password for ${a}`:`Code sent to ${(x==null?void 0:x.email)||a}`})]}),e.jsxs(W,{className:"space-y-6",children:[t==="email"?e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Email Address"}),e.jsx(u,{type:"email",value:a,onChange:s=>d(s.target.value),placeholder:"Enter your email address",required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400",autoComplete:"email","aria-describedby":"email-help"})]}),e.jsx(r,{type:"submit",disabled:i||!a,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Code..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Send Verification Code"]})})]}):t==="password"?e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(u,{type:c?"text":"password",value:n,onChange:s=>p(s.target.value),placeholder:"Enter your password",required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400 pr-10",autoComplete:"current-password"}),e.jsx("button",{type:"button",onClick:()=>E(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white","aria-label":c?"Hide password":"Show password",children:c?e.jsx(G,{className:"w-4 h-4"}):e.jsx($,{className:"w-4 h-4"})})]})]}),e.jsx(r,{type:"submit",disabled:i||!n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 mr-2 animate-spin"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Sign In as Admin"]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(r,{type:"button",variant:"ghost",onClick:w,className:"text-gray-300 hover:text-white p-0 h-auto",children:"â† Back to Email"})})]}):e.jsxs("form",{onSubmit:M,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Verification Code"}),e.jsx(u,{type:"text",value:o,onChange:s=>g(s.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"Enter 6-digit code",required:!0,className:"bg-white/10 border-white/20 text-white placeholder:text-gray-400 text-center text-lg tracking-widest",maxLength:6,autoComplete:"one-time-code"}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Check your email for the verification code"})]}),e.jsx(r,{type:"submit",disabled:i||o.length!==6,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3",children:i?e.jsxs(e.Fragment,{children:[e.jsx(h,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"w-4 h-4 mr-2"}),"Verify & Sign In"]})}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx(r,{type:"button",variant:"ghost",onClick:D,disabled:i,className:"text-gray-300 hover:text-white p-0 h-auto",children:"Resend Code"}),e.jsx(r,{type:"button",variant:"ghost",onClick:w,className:"text-gray-300 hover:text-white p-0 h-auto",children:"Change Email"})]})]}),t==="email"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-300 text-center",children:"Quick Demo Access:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:I.map(s=>e.jsx(r,{variant:"outline",size:"sm",onClick:()=>B(s.email),className:"border-white/20 text-white hover:bg-white/10 text-xs",children:s.role},s.role))}),e.jsx("p",{className:"text-xs text-gray-400 text-center",children:"Click any role to fill email. Admin requires password, others use verification codes."})]}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-gray-300",children:["Don't have an account?"," ",e.jsx(N,{to:"/register",className:"text-blue-400 hover:text-blue-300 font-medium",children:"Sign up here"})]})})]}),t==="verification"&&e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-xs text-gray-400",children:"The verification code is displayed in the browser console for demo purposes"})})]})]})})]})})]})};export{ee as default};
